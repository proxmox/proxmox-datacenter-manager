proxmox-datacenter-manager (0.9.5) trixie; urgency=medium

  * views: add 'include-all' param; change semantics when there are no
    includes.

  * api-types: add 'layout' property to ViewConfig to prepare for UI
    integration.

  * api: implement CRUD endpoints for views.

  * api: require a minimum password length of 8 characters, following NIST
    recommendations.

  * api: pve remote: integrate read-only endpoints to get VM and CT configs.

  * api: firewall: add option, rules and status endpoints to prepare for
    initial support to show remote firewall config.

  * cli: restore functionality of the admin CLI tool.

  * api: add missing `returns` definitions to api macro tree-wide so this
    information shows up properly in a potential api viewer.

  * api: remote tasks: add fine-grained permission check on the remote level.

  * remote tasks: poll foreign, non-tracked active tasks with a low frequency
    to avoid them getting stuck.

  * remote tasks: make sure to update the task cache if there were errors when
    polling.

  * api: add endpoints to get remote apt system version and repository state.

  * views config: preparations for future glob/regex support.

  * server: add task log, auth log and access log rotation scheduled at
    midnight.

 -- Proxmox Support Team <support@proxmox.com>  Mon, 01 Dec 2025 04:13:31 +0100

proxmox-datacenter-manager (0.9.4) trixie; urgency=medium

  * api: add new remote shell module with termproxy endpoints, which can be
    used to proxy a websocket based connection from PDM UI to the remote node.

  * api: pve: wire up remote shell support.

  * api: pbs: wire up node shell endpoints.

  * remote tasks: correctly filter out foreign running PBS tasks, avoiding
    suggesting that there seemingly is a steadily increasing amount of running
    remote tasks.

  * api: pve guests: fix regression with cross-remote  migration

  * api: pve guest migrate: make passing storage and bridge mappings more
    robust.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 19 Nov 2025 21:32:12 +0100

proxmox-datacenter-manager (0.9.3) trixie; urgency=medium

  * server: use types indead of string for migration parameters.

  * fix #6901: api: add explicit permission check for SDN zones, vnets and
    controllers list endpoints.

  * api: subscription status: use correct resource ACL path in permission
    check.

  * api: use HTTP 403 Forbidden response code if user does have access to
    resource over the previously wrongly used 401 Unauthorized code.

  * api: add endpoints for querying the PDM node's status.

  * improve remote UPID handling, making it more type safe.

  * api, pbs-client: add bindings for task list, task status, task log and add
    PBS task API endpoints similar to the PVE ones.

  * remote updates, upgrade checks: fix old-version being now correctly being
    marked as optional.

  * add initial backend support for views, not yet exposed in the UI.

  * handle new unknown enum variants for better forward compatibility with
    newer remote project releases and features.

 -- Proxmox Support Team <support@proxmox.com>  Thu, 13 Nov 2025 22:54:13 +0100

proxmox-datacenter-manager (0.9.2) trixie; urgency=medium

  * fix #6794: api: allow non-root users to view stats on dashboard.

  * api: resources: fix subscription level for remotes where all nodes have an
    unknown status.

  * fix #6901: api: add permission checks for PBS metrics endpoints.

  * fix #6901: PBS: fix permission check for showing overview by dropping the
    bogus `node` parameter from the ACL object path.

  * api: add support for adding OpenID Connect realms and using them for
    login.

  * api: add endpoints for managing API tokens. Please note that the PDM API
    is not yet stabilized.

  * PBS: request latest metrics when using hourly metrics time frame, just
    like we do it for PVE remotes.

  * resources: make search terms case insensitive.

  * update client dependencies to fix compatibility issue with some PBS 3
    versions that wrongly signalled support for HttpOnly cookies.

  * metric collection: include PBS nodes in top-usage entities.

  * clean up ACL tree entries and api tokens for the removed user when
    deleting a user.

  * api daemon: implement cache for pending system updates of remotes and
    query the update status from all remotes every six hours in a background
    task.

  * api: add remote-type search category for resources to allow filtering for
    all resources from a specific remote type like PVE or PBS.

  * api: expose more status information and counters specific to PBS,
    including maintenance mode.

  * api: add property matching for resources and expose them for usage in the
    resource search system.

  * improve logging of failed remote API requests by including the full
    request path and also explicitly log unknown errors.

 -- Proxmox Support Team <support@proxmox.com>  Mon, 27 Oct 2025 12:53:59 +0100

proxmox-datacenter-manager (0.9.1) trixie; urgency=medium

  * TTY login banner: fix typo.

  * server: api: add TLS probe endpoint for Proxmox Backup Server and
    implement endpoint to scan remote PBS instances to allow using the remote
    wizard to add PBS remotes.

  * add initial support to configure LDAP and AD authentication realms.

  * pbs-client: use `json` formatter for the PBS snapshot list streaming API.

  * api: add endpoint to list all namespaces from a datastore of a PBS remote.

 -- Proxmox Support Team <support@proxmox.com>  Fri, 26 Sep 2025 19:41:41 +0200

proxmox-datacenter-manager (0.9.0) trixie; urgency=medium

  * bump version for BETA release based on Debian 13 Trixie.

  * self-signed cert: use correct product name for "Organization" field when
    creating a new certificate.

 -- Proxmox Support Team <support@proxmox.com>  Thu, 11 Sep 2025 11:17:16 +0200

proxmox-datacenter-manager (0.3.2) trixie; urgency=medium

  * add initial pdmAtoB upgrade checker script.

  * cli/admin: add a versions command to show current package versions.

  * api: resources: implement remote match for template.

  * api: resources: improve behavior when searching for remotes to more easily
    allow to filter by resources of a specific remote, rather than limiting to
    the remote type.

  * api: resources: use root cause for errors that happen when fetching
    resources from a remote.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 10 Sep 2025 17:25:33 +0200

proxmox-datacenter-manager (0.3.1) trixie; urgency=medium

  * api: implement PVE storage usage metrics.

  * api: add nodes/storage endpoints for status and metrics.

  * api: add resource-type parameter when listing resources and include SDN
    Zones as resources.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 10 Sep 2025 12:08:54 +0200

proxmox-datacenter-manager (0.3.0) trixie; urgency=medium

  * update PDM apt sources to deb822 format and point to trixie.

  * server: api: resources: handle virtual guest template in status count.

  * metric collection: rework metric polling to run concurrently to improve
    total time required to poll all remotes, especially on high network
    latency and naturally also high remote counts.

  * metric collection: persist state after metric collection to allow reusing
    this after a daemon restart, e.g. due to a package update.

  * metric collection: collect overdue metrics on startup/timer change.

  * metric collection: record the remote response time and time required for a
    full collection run to provide better insights.

  * api: add endpoint to trigger metric collection.

  * api: remotes: trigger immediate metric collection for newly added nodes.

  * cli: add commands for metric-collection trigger and status.

  * metric collection: just skip missed timer ticks, no point in increasing
    polling frequency in such a case.

  * add ACL API by reusing common proxmox-access-control implementation.

  * remote task archive: handle missing journal file gracefully.

  * add api for getting available updates/changelogs for remote nodes.

  * add various (API) infrastructure for initial SDN integration.

  * api: resources: add more complex filter syntax that is loosely based on
    the Elasticsearch and GitHub query language. It basically works like:
    + 'sometext'  : normal search term (OR'd with other terms)
    + '+sometext' : required search term
    + 'cat:text'  : looks for 'text' in the category 'cat'

  * task cache: treat a limit of 0 as unbounded and return all tasks in that
    case.

  * api: remote tasks: add 'remote' filter option.

  * api: add remote-tasks statistics.

 -- Proxmox Support Team <support@proxmox.com>  Thu, 04 Sep 2025 20:28:32 +0200

proxmox-datacenter-manager (0.2.2) trixie; urgency=medium

  * api server: make incoming connection handling more robust for some error
    cases.

  * qemu: enable connection tracking state transfer on VM remote live
    migration. Note that this is best effort as the network equipment and
    especially third party firewall in the target environment can still cause
    resets for open connections.

  * remote tasks: implement improved cache for remote tasks to split the
    single file cache into an 'active' and multiple 'archive' files. This
    improves lookup performance by around three orders of magnitude (from
    seconds to milliseconds) on benchmarks with 1.5 million tasks in the
    cache. Further the data structure was optimized for space, avoiding
    redundant information and older archived tasks will get compressed using
    zstd, which results in some significant reduction of storage space usage.
    This helps especially when there are many tasks, like when using many
    remotes with a big amount of guests.

  * remote tasks: add background task for polling task from all configured
    remotes every 10 minutes, use new task cache. Active tasks are tracked
    separately and their status is re-queried every 10 seconds.

  * api: add probe-tls endpoint to allow trust on first use (TOFU) prompts for
    when adding remotes.

  * api: acme cert order: fix constructing config with "default" account.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 27 Aug 2025 19:34:20 +0200

proxmox-datacenter-manager (0.2.1) trixie; urgency=medium

  * re-enable PBS integration again after fixing compilation issues in crates
    shared with UI.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 06 Aug 2025 20:14:35 +0200

proxmox-datacenter-manager (0.2.0) trixie; urgency=medium

  * initial upgrade for Debian 13 "Trixie" based release.

 -- Proxmox Support Team <support@proxmox.com>  Tue, 05 Aug 2025 21:38:34 +0200

proxmox-datacenter-manager (0.1.11) bookworm; urgency=medium

  * privileged-api: create /var/cache/proxmox-datacenter-manager/ on startup

  * api: add caching 'remote-tasks' API endpoint

  * pve api: track new tasks created by PDM

  * api: fix remote upid tracking for qemu remote migration

  * api: add target-endpoint parameter to remote migrate api calls

  * api: pve: add remote cluster-status api call

  * client: add cluster status method

  * client: add target-endpoint parameter to remote migration methods

  * task cache: skip remotes with errors on fetch to avoid that a single
    unavailable cluster node can block the whole remote.

  * task cache: skip remotes with errors on fetch

  * task cache: add filter options and reverse task order

  * add optional web-url configuration for remotes to override the URL that
    the PDM web UI should use to open external resources.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 29 Jan 2025 09:21:27 +0100

proxmox-datacenter-manager (0.1.10) bookworm; urgency=medium

  * privileged api: do not clean-up socket unconditionally on start-up but
    only before freshly creating it. This should fix an issue where the
    unprivileged, main API dameon could not proxy to the privileged API
    daemon anymore after the latter was reloaded. Which, for example, can
    happen when installing package updates.

  * privileged api: output log message before signaling readiness to systemd.

 -- Proxmox Support Team <support@proxmox.com>  Mon, 30 Dec 2024 15:43:10 +0100

proxmox-datacenter-manager (0.1.9) bookworm; urgency=medium

  * api: apt versions: fix version of running PDM daemon

  * api: apt versions: track more packages again

  * privileged api server: properly handle socket on reload

  * packaging: properly reload services after upgrade

 -- Proxmox Support Team <support@proxmox.com>  Mon, 23 Dec 2024 16:32:26 +0100

proxmox-datacenter-manager (0.1.8) bookworm; urgency=medium

  * depend on libproxmox-acme-plugins package to ensure DNS challenge plugins
    are available.

 -- Proxmox Support Team <support@proxmox.com>  Thu, 19 Dec 2024 18:56:31 +0100

proxmox-datacenter-manager (0.1.7) bookworm; urgency=medium

  * api: add more permission checks for dashboard calls so that those are
    usable for non-root users. the top entities are still root only for now.

  * remote migrate: fix handling of host:port as remote

  * remote migrate: don't log parameters

  * api: remotes: don't return token secret in response

  * server: api: add 'realms' add point for PVE

 -- Proxmox Support Team <support@proxmox.com>  Thu, 19 Dec 2024 13:39:02 +0100

proxmox-datacenter-manager (0.1.6) bookworm; urgency=medium

  * explicitly depend on proxmox-termproxy.

  * ship GRUB_DISTRIBUTOR default-snippet for easier recognition on boot.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 18 Dec 2024 23:38:43 +0100

proxmox-datacenter-manager (0.1.5) bookworm; urgency=medium

  * api: log listening address and port used

  * api: use always use base user when trying to create a token

  * packages: recommend UI package from API and vice versa

  * add simple daily-update executable with systemd service & timer

  * fix installing apt sources file for pdm-test repo

  * api: add qemu migrate preconditions api call

  * automatically poll all remotes and fill metrics cache every 15 minutes.

 -- Proxmox Support Team <support@proxmox.com>  Wed, 18 Dec 2024 15:55:21 +0100

proxmox-datacenter-manager (0.1.4) bookworm; urgency=medium

  * api: add banner service to write our /etc/issue

 -- Proxmox Support Team <support@proxmox.com>  Wed, 18 Dec 2024 10:40:24 +0100

proxmox-datacenter-manager (0.1.3) bookworm; urgency=medium

  * api: pve: various permission check improvements

  * server: remove debug logging from calculating the top entities

  * server: api: include more 'top entities' metrics

  * server: api: top entities: make timeframe configurable

  * ship sources.list file with pdm-test repo configured

 -- Proxmox Support Team <support@proxmox.com>  Wed, 18 Dec 2024 09:47:27 +0100

proxmox-datacenter-manager (0.1.2) bookworm; urgency=medium

  * admin cli: set up server context on startup

  * server: add docgen binary

  * server: api: add pve node status api call

  * record various missing package dependencies

 -- Proxmox Support Team <support@proxmox.com>  Mon, 16 Dec 2024 21:26:08 +0100

proxmox-datacenter-manager (0.1.1) bookworm; urgency=medium

  * bump version for testing packaging with current development state.

 -- Proxmox Support Team <support@proxmox.com>  Sun, 15 Dec 2024 21:10:19 +0100

proxmox-datacenter-manager (0.1.0) bookworm; urgency=medium

  * initial release

 -- Proxmox Support Team <support@proxmox.com>  Thu, 26 Oct 2023 18:44:35 +0200
